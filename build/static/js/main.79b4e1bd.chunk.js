(this["webpackJsonptest-covid-frontend-api"]=this["webpackJsonptest-covid-frontend-api"]||[]).push([[0],{135:function(e,t,a){e.exports={containerGraphic:"Graphic_containerGraphic__3oJMR"}},136:function(e,t,a){e.exports={progress:"CircularProgressComponent_progress__2eJfb"}},163:function(e,t,a){e.exports=a(197)},168:function(e,t,a){},169:function(e,t,a){},197:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),o=a.n(c),i=(a(168),a(169),a(67)),l=a(11),s=a(254),u=a(242),d=a(246),m=a(65),f=a(250),p=a(141),b=a.n(p),g=a(243),O=a(245),v=a(25),j=a(93),h=a(248),y=a(251),E=a(50);function S(e){var t=e.control,a=e.errors,c=e.countries,o=Object(n.useState)(""),i=Object(l.a)(o,2),s=i[0],u=i[1],d=Object(n.useState)(!1),f=Object(l.a)(d,2),p=f[0],b=f[1];return Object(n.useEffect)((function(){if(a){switch(a.type){case"required":u(E.message[a.ref.name].required?E.message[a.ref.name].required:E.message[a.ref.name]);break;case"minLength":u(E.message[a.ref.name].minLength)}b(!0)}else u(""),b(!1)}),[a]),r.a.createElement(m.a,{as:r.a.createElement(y.a,{id:"countryAutocomplete",options:c,getOptionLabel:function(e){return e.name},renderOption:function(e){return r.a.createElement("span",null,(t=e.flag,"undefined"!==typeof String.fromCodePoint?t.toUpperCase().replace(/./g,(function(e){return String.fromCodePoint(e.charCodeAt(0)+127397)})):t)," ",e.name);var t},renderInput:function(e){return r.a.createElement(h.a,Object.assign({},e,{label:"Choose a country",variant:"outlined",error:p,helperText:s}))}}),onChange:function(e){return Object(l.a)(e,2)[1]},name:"country",rules:{required:!0},control:t,defaultValue:{code:"AF",label:"Afghanistan",phone:"93"}})}var D=a(20),_=a(142),C=a(64),x=a(247),F=a(5),w=a(241),k=function(e){var t=new Date(e).toISOString().substring(0,10).split(/-/g),a=Object(l.a)(t,3),n=a[0],r=a[1],c=a[2];return"".concat(n,"-").concat(r,"-").concat(c)},R=function(e){var t=new Date(e).toISOString().substring(0,10).split(/-/g),a=Object(l.a)(t,3),n=(a[0],a[1]),r=a[2];return"".concat(r,"-").concat(n)},N=a(37),W=a.n(N),T=function(e){var t=e.control,a=e.errors,c=(e.register,e.labeltext,e.value),o=e.onChange,i=(e.labelFunc,e.format),s=e.emptyLabel,u=e.autoOk,d=e.onOpen,f=e.onClose,p=e.open,b=Object(_.a)(e,["control","errors","register","labeltext","value","onChange","labelFunc","format","emptyLabel","autoOk","onOpen","onClose","open"]),g=C.a,O=Object(n.useState)(c[0]),h=Object(l.a)(O,2),y=h[0],S=h[1],k=Object(n.useState)(c[1]),R=Object(l.a)(k,2),N=R[0],T=R[1],P=Object(n.useState)(""),A=Object(l.a)(P,2),L=A[0],M=A[1],q=Object(n.useState)(!1),I=Object(l.a)(q,2),B=I[0],G=I[1],J=Object(n.useState)(void 0),z=Object(l.a)(J,2),V=z[0],Y=z[1],H=Object(n.useState)(void 0),U=Object(l.a)(H,2),K=U[0],Q=U[1],Z=Object(n.useState)(!1),$=Object(l.a)(Z,2),X=$[0],ee=$[1],te=Object(n.useState)(void 0),ae=Object(l.a)(te,2),ne=ae[0],re=ae[1],ce=Object(n.useState)(!1),oe=Object(l.a)(ce,2),ie=oe[0],le=oe[1],se=Object(v.b)(),ue=Math.min(y,N||ne),de=Math.max(y,N||ne),me=Object(n.useState)(!1),fe=Object(l.a)(me,2),pe=fe[0],be=fe[1],ge=void 0!==p?p:pe;Object(n.useEffect)((function(){if(a){switch(a.type){case"required":M(E.message[a.ref.name].required?E.message[a.ref.name].required:E.message[a.ref.name])}G(!0)}else M(""),G(!1)}),[a]),Object(n.useEffect)((function(){if(ge&&ie&&!V&&!K)return le(!1),Y(y),void Q(N);ge||ie||(S(V),T(K),re(void 0),ee(!1)),ge&&u&&!ie&&y&&N&&X&&(le(!0),f?f():be(!1)),ie&&y&&N&&!ge&&X&&(ee(!1),o({begin:y,end:N}),f?f():be(!1)),s&&(T(void 0),S(void 0))}),[y,N,u,ie,ge,V,X,K,f,o,s]);var Oe=function(e){return se.format(e,i||se.dateFormat)},ve=null;!function(e){var t=null;switch(e){case"sm":t="(min-width: 576px)";break;case"md":t="(min-width: 768px)";break;case"lg":t="(min-width: 992px)";break;case"xl":t="(min-width: 1200px)";break;default:t="(min-width: 992px)"}Object(w.a)(t,{defaultMatches:!0})}("sm");return ve=null,r.a.createElement("div",{className:W.a.inputContainerStyle},r.a.createElement(v.a,{utils:j.a,locale:g},r.a.createElement(m.a,{as:r.a.createElement(x.a,Object.assign({},b,{label:ve,variant:"outlined",inputVariant:"outlined",fullWidth:!0,margin:"dense",value:y,renderDay:function(e,t,a,n){var c;return r.a.cloneElement(n,{onClick:function(t){ee(!0),t.stopPropagation(),y?N?(S(e),T(void 0)):(se.isBeforeDay(e,y)?(T(y),S(e)):T(e),u&&(Y(void 0),Q(void 0))):S(e)},onMouseEnter:function(){return requestAnimationFrame((function(){return re(e)}))},onFocus:function(){return requestAnimationFrame((function(){return re(e)}))},className:Object(F.a)(W.a.day,(c={},Object(D.a)(c,W.a.hidden,n.props.hidden),Object(D.a)(c,W.a.current,n.props.current),Object(D.a)(c,W.a.isDisabled,n.props.disabled),Object(D.a)(c,W.a.focusedRange,se.isAfterDay(e,ue)&&se.isBeforeDay(e,de)||se.isSameDay(e,ue)&&!se.isSameDay(e,de)||se.isSameDay(e,de)&&!se.isSameDay(e,ue)),Object(D.a)(c,W.a.focusedFirst,se.isSameDay(e,ue)&&!se.isSameDay(e,de)),Object(D.a)(c,W.a.focusedLast,se.isSameDay(e,de)&&!se.isSameDay(e,ue)),Object(D.a)(c,W.a.beginCap,se.isSameDay(e,ue)),Object(D.a)(c,W.a.endCap,se.isSameDay(e,de)),c))})},open:ge,error:B,helperText:L,onOpen:function(){le(!1),Y(y),Q(N),d?d():be(!0)},onAccept:function(){y&&N||(ne&&se.isBeforeDay(y,ne)?T(ne):(T(y),S(ne))),Y(void 0),Q(void 0),le(!0)},onClose:function(){f?f():be(!1)},onChange:function(){},labelFunc:function(e,t){if(!ge)return e&&y&&N&&!s?"".concat(Oe(y)," - ").concat(Oe(N)):""},DialogProps:{className:W.a.dateRangePickerDialog}})),name:"period",rules:{required:!0},control:t})))},P=a(96),A=a.n(P),L=a(134),M=a.n(L),q=a(135),I=a.n(q),B=function(e){var t=e.data,a={chart:{height:"20%",type:"line"},title:{text:"Gr\xe1fico"},xAxis:{categories:t.map((function(e){var t=e.Date;return R(t)}))},yAxis:{title:{text:"Total Case"}},plotOptions:{line:{dataLabels:{enabled:!0},enableMouseTracking:!1}},series:[{name:"",data:t.map((function(e){return e.Cases}))}]};return r.a.createElement("div",{className:I.a.containerGraphic},r.a.createElement(M.a,{highcharts:A.a,options:a}))},G=a(244),J=a(136),z=a.n(J),V=function(){return r.a.createElement(G.a,{size:24,className:z.a.progress})},Y=function(e,t,a){return"".concat(e,"/status/confirmed?from=").concat(t,"&to=").concat(a)},H=a(21),U=a.n(H),K=a(34);var Q=a(137),Z=a.n(Q).a.create({baseURL:"https://api.covid19api.com/country",headers:{"Content-type":"application/json"}}),$=a(253),X=a(252),ee=a(138),te=a(55);function ae(){var e=Object(ee.a)(["\n    query {\n        listCountries {\n            id\n            name\n            flag\n        }\n    }\n"]);return ae=function(){return e},e}var ne=a.n(te)()(ae());function re(){return r.a.createElement(g.a,{variant:"body2",color:"textSecondary"},"Copyright \xa9 ","WE",(new Date).getFullYear(),".")}var ce={country:null};function oe(e){return r.a.createElement(X.a,Object.assign({elevation:6,variant:"filled"},e))}function ie(){var e=Object(n.useState)(!1),t=Object(l.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),p=Object(l.a)(o,1)[0],h=Object(n.useState)({date:"",dateFormat:""}),y=Object(l.a)(h,2),E=y[0],D=y[1],_=Object(n.useState)({date:"",dateFormat:""}),C=Object(l.a)(_,2),x=C[0],F=C[1],w=Object(m.b)({defaultValues:ce}),R=w.handleSubmit,N=w.control,W=w.errors,P=Object(n.useState)(!1),A=Object(l.a)(P,2),L=A[0],M=A[1],q=Object(n.useState)([]),I=Object(l.a)(q,2),G=I[0],J=I[1],z=function(e,t){"clickaway"!==t&&M(!1)},H=function(e){var t=e.api,a=e.method,r=e.url,c=e.immediate,o=void 0!==c&&c,i=Object(n.useState)(null),s=Object(l.a)(i,2),u=s[0],d=s[1],m=Object(n.useState)(null),f=Object(l.a)(m,2),p=f[0],b=f[1],g=Object(n.useState)(null),O=Object(l.a)(g,2),v=O[0],j=O[1],h=Object(n.useCallback)((function(e){return j(!0),function(){var n=Object(K.a)(U.a.mark((function n(){return U.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:try{t[a](e).then((function(e){d(e.data)})).finally((function(){j(!1)}))}catch(r){b(r),j(!1)}case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()()}),[r]);return Object(n.useEffect)((function(){o&&h()}),[h,o]),{execute:h,response:u,error:p,isLoading:v}}({api:Z,method:"get",url:""}),Q=H.execute,X=H.response,ee=H.error,te=H.isLoading,ae=Object(i.useQuery)(ne,{errorPolicy:"all",fetchPolicy:"network-only"}),ie=ae.loading,le=ae.data;Object(n.useEffect)((function(){le&&le.listCountries&&J(le.listCountries)}),[le]);var se=function(e,t,a){var n=Y(e,t,a);Q(n)};return Object(n.useEffect)((function(){ee&&M(!0)}),[ee]),r.a.createElement(O.a,{component:"main",className:"container"},r.a.createElement(d.a,null),r.a.createElement("div",null,r.a.createElement("div",{className:"avatar"},r.a.createElement(s.a,{className:"color-circle"},r.a.createElement(b.a,{fontSize:"large",className:"color"}))),r.a.createElement("div",{className:"tipography"},r.a.createElement(g.a,{component:"h1",variant:"h5"},"Covid-19")),r.a.createElement("form",{onSubmit:R((function(e){var t=e.country,a=new Date;x.date<a?(se(t.name,E.dateFormat,x.dateFormat),c(!1)):(c(!0),setData([]))}))},r.a.createElement("div",{className:"form-item"},!1===ie?r.a.createElement(S,{countries:G,control:N,errors:W.country}):ie&&r.a.createElement(V,null)),r.a.createElement("div",{className:"form-item"},r.a.createElement(v.a,{utils:j.a},r.a.createElement(T,{value:[],name:"period",emptyLabel:p,labeltext:"Per\xedodo Inasistencia",errors:W.period,control:N,placeholder:"Select date",format:"dd/MM/yyyy",onChange:function(e){return function(e){var t=e.begin,a=e.end,n=k(t),r=k(a);D({date:t,dateFormat:n}),F({date:a,dateFormat:r})}(e)}}))),r.a.createElement("div",{className:"form-item"},r.a.createElement(u.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary"},"Search")),r.a.createElement("div",{className:"form-item"},r.a.createElement($.a,{open:L,autoHideDuration:6e3,onClose:z},r.a.createElement(oe,{onClose:z,severity:"error"},"ERROR API!")))),X&&0!==X.length?r.a.createElement(B,{data:X}):te&&r.a.createElement("div",{className:"form-item"},r.a.createElement(V,null)),a&&r.a.createElement("p",null,"Invalid Date - Max date is today")),r.a.createElement(f.a,{mt:1},r.a.createElement(re,null)))}var le=new i.ApolloClient({uri:"https://wemrchile.com/api",cache:new i.InMemoryCache});var se=function(){return r.a.createElement(i.ApolloProvider,{client:le},r.a.createElement("div",{className:"App"},r.a.createElement(ie,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},37:function(e,t,a){e.exports={inputContainerStyle:"TextFieldWidgetDateRange_inputContainerStyle__1HNYv",labelDesktopStyle:"TextFieldWidgetDateRange_labelDesktopStyle__3FNTL",dateRangePickerDialog:"TextFieldWidgetDateRange_dateRangePickerDialog__2ggw7","MuiPickersCalendar-transitionContainer":"TextFieldWidgetDateRange_MuiPickersCalendar-transitionContainer__2tzPk",day:"TextFieldWidgetDateRange_day__3OYOt",hidden:"TextFieldWidgetDateRange_hidden__wLWZN",current:"TextFieldWidgetDateRange_current__2c2Mi",focusedRange:"TextFieldWidgetDateRange_focusedRange__18jqO",dayDisabled:"TextFieldWidgetDateRange_dayDisabled__1AAyl",beginCap:"TextFieldWidgetDateRange_beginCap__2e-KS",endCap:"TextFieldWidgetDateRange_endCap__3a725",focusedFirst:"TextFieldWidgetDateRange_focusedFirst__2pj6I",focusedLast:"TextFieldWidgetDateRange_focusedLast__2LPqS"}},50:function(e){e.exports=JSON.parse('{"message":{"period":"Select period.","country":"Select country."}}')}},[[163,1,2]]]);
//# sourceMappingURL=main.79b4e1bd.chunk.js.map